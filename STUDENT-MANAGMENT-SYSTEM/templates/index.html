<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Management System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h1>Student Management System</h1>

<form method="POST">
    <input type="text" name="name" placeholder="Student Name" required>
    <input type="text" name="roll" placeholder="Roll Number" required>
    <input type="text" name="course" placeholder="Course" required>
    <button type="submit">Add Student</button>
</form>

<div class="search-sort">
    <form method="GET">
        <input type="text" name="query" placeholder="Search by name or roll" value="{{ query }}">
        <select name="sort_by">
            <option value="id" {% if sort_by=='id' %}selected{% endif %}>ID</option>
            <option value="name" {% if sort_by=='name' %}selected{% endif %}>Name</option>
            <option value="roll" {% if sort_by=='roll' %}selected{% endif %}>Roll</option>
            <option value="course" {% if sort_by=='course' %}selected{% endif %}>Course</option>
        </select>
        <select name="sort_order">
            <option value="asc" {% if sort_order=='asc' %}selected{% endif %}>Ascending</option>
            <option value="desc" {% if sort_order=='desc' %}selected{% endif %}>Descending</option>
        </select>
        <button type="submit">Search / Sort</button>
    </form>
</div>

<p><strong>Total Students:</strong> {{ total }}</p>

<table>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Roll</th>
        <th>Course</th>
        <th>Actions</th>
    </tr>
    {% for student in students %}
    <tr>
        <td>{{ student.id }}</td>
        <td>{{ student.name }}</td>
        <td>{{ student.roll }}</td>
        <td>{{ student.course }}</td>
        <td>
            <a href="/edit/{{ student.id }}">Edit</a> |
            <a href="/delete/{{ student.id }}" onclick="return confirm('Are you sure?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<p><a href="/export_csv">Export CSV</a></p>

</body>
</html>


